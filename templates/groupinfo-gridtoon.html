{%- macro itemtag(itemset) -%}
<sup>{% if itemset == 'crafted' %}C{%- endif -%}</sup>
{%- endmacro -%}
{%- macro gridcolor(itemLevel, enchant, quality) -%}
{{ itemLevel | ilvlcolor(quality) }}{% if enchant == 0 %};border: 1px solid red{% elif enchant == 1 %};border: 1px solid blue{%- endif -%}
{%- endmacro -%}
{%- macro itemtd(item) -%}
<td class="grid" style="{{ gridcolor(item.itemLevel,item.enchant,item.quality) }}">{%- if item.itemLevel != 0 %}<a href="http://wowhead.com/item={{ item.id }}" rel="bonus={{ item.bonusLists|join(':') }}{% if item.tooltips.enchant is defined %};ench={{ item.tooltips.enchant }}{% endif %}{% if item.tooltips.gems is defined %};gems={{ item.tooltips.gems }}{% endif %}{% if item.tooltips.set is defined %};pcs={{ item.tooltips.set|join(':') }}{% endif %}">{{ item.itemLevel }}</a>{{ itemtag(item.set) }}{%- endif -%}</td>
{%- endmacro -%}
<tr>
  <td class="user" style="" id="{{ name | normalize }}-td">
    <a href="http://us.battle.net/wow/en/character/{{ realm }}/{{ name }}/advanced" target="_blank">{{ name }}</a>
  </td>
{%- if load_status == 'nok' %}
  <td class="" style="text-align:left" colspan="12">{{ reason }}</td>
{%- else %}
  <td class="{{ class|replace(" ","")|lower() }} grid" style="">{{ class }}</td>
  <td class="grid" style="white-space: nowrap">
    {%- if role == "tank" -%}
    <img src="/resources/icon-tank.png"/>
    {%- elif role == "healer" -%}
    <img src="/resources/icon-healer.png"/>
    {%- elif role == "dps" -%}
    <img src="/resources/icon-melee-dps.png"/>
    {%- else -%}
    <img src="/resources/icon-ranged-dps.png"/>
    {%- endif -%}
    {%- if status == 'main' %} Main{%- elif status == 'bench' %} Bench{%- else %} Alt{% endif %}</td>
  <td class="grid" style="">{{ avgilvle }}</td>
  <td class="grid" style="">{{ avgilvl }}</td>
  {{ itemtd(head) }}
  {{ itemtd(shoulder) }}
  {{ itemtd(chest) }}
  {{ itemtd(hands) }}
  {{ itemtd(legs) }}
  {{ itemtd(neck) }}
  {{ itemtd(back) }}
  {{ itemtd(wrist) }}
  {{ itemtd(waist) }}
  {{ itemtd(feet) }}
  {{ itemtd(finger1) }}
  {{ itemtd(finger2) }}
  {{ itemtd(trinket1) }}
  {{ itemtd(trinket2) }}
  {{ itemtd(mainHand) }}
  {{ itemtd(offHand) }}
  <td class="" style="text-align:center">{{ azeriteLevel }}</td>
{% endif -%}
</tr>
